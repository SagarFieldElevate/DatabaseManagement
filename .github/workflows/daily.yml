name: Daily Jobs

on:
  schedule:

    - cron: "0 0 * * *"
  workflow_dispatch:

jobs:
  run-daily-scripts:
    name: ${{ matrix.script }}
    runs-on: ubuntu-latest
    env:
      AIRTABLE_API_KEY: ${{ secrets.AIRTABLE_API_KEY }}
      GH_TOKEN: ${{ secrets.GH_TOKEN }}
      FRED_API_KEY: ${{ secrets.FRED_API_KEY }}
      COINGECKO_API_KEY: ${{ secrets.COINGECKO_API_KEY }}
    strategy:
      fail-fast: false
      max-parallel: 5
      matrix:
        script:
          - "code/daily/24h Volatility & Trading Range.py"
          - "code/daily/BTC ETF Net Flow.py"
          - "code/daily/BTCPriceDaily.py"
          - "code/daily/CoinDeskSentiment.py"
          - "code/daily/CurrencyExchange.py"
          - "code/daily/Exchange Rates (Investing.com).py"
          - "code/daily/GoldDailyPrice.py"
          - "code/daily/GoogleTrending.py"
          - "code/daily/Interest Rates (Federal Funds Rate).py"
          - "code/daily/InterestRate.py"
          - "code/daily/LiquidityIndicator.py"
          - "code/daily/MarketCap.py"
          - "code/daily/PricesScript.py"
          - "code/daily/QQQData.py"
          - "code/daily/SPYData.py"
          - "code/daily/StableCoinSupply.py"
          - "code/daily/Technicals.py"
          - "code/daily/USDollarIndex.py"
          - "code/daily/VolumeTraded.py"
          - "code/daily/data_upload_utils.py"
          - "code/daily/fetch_baltic_dry_index.py"
          - "code/daily/fetch_bank_lending_rates.py"
          - "code/daily/fetch_bond_yields.py"
          - "code/daily/fetch_credit_spreads.py"
          - "code/daily/fetch_crude_oil_prices.py"
          - "code/daily/fetch_equity_market_cap.py"
          - "code/daily/fetch_gold_prices.py"
          - "code/daily/fetch_natural_gas_prices.py"
          - "code/daily/fetch_stock_market_indices.py"
          - "code/daily/fetch_vix.py"
          - "code/daily/fetch_yield_curve_spread.py"
          - "code/daily/Bitcoin Exchange Net Flows.py"
          - "code/daily/Ethereum Exchange Net Flows.py"
          - "code/daily/Stablecoin Exchange Flows.py"
          - "code/daily/Bitcoin Miner Outflows.py"
          - "code/daily/Ethereum Miner Outflows.py"
          - "code/daily/coingecko_altcoin_price_top100.py"
          - "code/daily/coingecko_btc_daily_returns.py"
          - "code/daily/coingecko_btc_daily_volume.py"
          - "code/daily/coingecko_crypto_price_daily.py"
          - "code/daily/coingecko_eth_daily_volume.py"
          - "code/daily/coingecko_stablecoin_peg_deviation.py"
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.x'
      - name: Install dependencies
        run: pip install -r requirements.txt
      - name: Run ${{ matrix.script }}
        run: python "${{ matrix.script }}"
