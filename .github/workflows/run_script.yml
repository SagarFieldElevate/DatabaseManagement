name: Parallel Notebooks

on:
  schedule:
    - cron: "0 * * * *"  # hourly
  workflow_dispatch:

jobs:
  # run_ohlc:
  #   runs-on: ubuntu-latest
  #   steps:
  #     - uses: actions/checkout@v2
  #     - uses: actions/setup-python@v2
  #       with:
  #         python-version: '3.x'
  #     - run: |
  #         pip install -r requirements.txt
  #         pip install nbconvert
  #     - name: Run OHLC Notebook
  #       env:
  #         AIRTABLE_API_KEY: ${{ secrets.AIRTABLE_API_KEY }}
  #         GH_TOKEN: ${{ secrets.GH_TOKEN }}
  #       run: jupyter nbconvert --to notebook --execute code/PricesScript.ipynb --output ohlc_output.ipynb

  # run_volume:
  #   runs-on: ubuntu-latest
  #   steps:
  #     - uses: actions/checkout@v2
  #     - uses: actions/setup-python@v2
  #       with:
  #         python-version: '3.x'
  #     - run: |
  #         pip install -r requirements.txt
  #         pip install nbconvert
  #     - name: Run Volume Notebook
  #       env:
  #         AIRTABLE_API_KEY: ${{ secrets.AIRTABLE_API_KEY }}
  #         GH_TOKEN: ${{ secrets.GH_TOKEN }}
  #       run: jupyter nbconvert --to notebook --execute code/VolumeTraded.ipynb --output volume_output.ipynb

  run_trading_range:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-python@v2
        with:
          python-version: '3.x'
      - run: |
          pip install -r requirements.txt
          pip install nbconvert
      - name: Run Trading Range
        env:
          AIRTABLE_API_KEY: ${{ secrets.AIRTABLE_API_KEY }}
          GH_TOKEN: ${{ secrets.GH_TOKEN }}
        run: jupyter nbconvert --to notebook --execute "code/24h Volatility & Trading Range.ipynb" --output range_output.ipynb

  # run_marketcap:
  #   runs-on: ubuntu-latest
  #   steps:
  #     - uses: actions/checkout@v2
  #     - uses: actions/setup-python@v2
  #       with:
  #         python-version: '3.x'
  #     - run: |
  #         pip install -r requirements.txt
  #         pip install nbconvert
  #     - name: Run Market Cap
  #       env:
  #         AIRTABLE_API_KEY: ${{ secrets.AIRTABLE_API_KEY }}
  #         GH_TOKEN: ${{ secrets.GH_TOKEN }}
  #       run: jupyter nbconvert --to notebook --execute code/MarketCap.ipynb --output marketcap_output.ipynb
